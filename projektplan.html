<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projektplan Gantt Chart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles to create the bar effect and add some vibe */
        .gantt-cell {
            max-width: 30px; /* Set a maximum width for calendar week columns */
            white-space: nowrap;
        }
        .gantt-bar {
            height: 24px;
            border-radius: 6px;
            opacity: 0.8;
            transition: all 0.2s ease-in-out;
        }
        .gantt-bar:hover {
            opacity: 1;
            transform: scale(1.05);
        }
        /* Color mapping for phases */
        .phase-0 { background-color: #6366f1; } /* Indigo */
        .phase-1 { background-color: #8b5cf6; } /* Violet */
        .phase-2 { background-color: #ec4899; } /* Pink */
        .phase-3 { background-color: #10b981; } /* Emerald */

        /* Ensures sub-tasks are visually indented */
        .sub-task td:first-child {
            padding-left: 2.5rem; /* Corresponds to pl-10 in Tailwind */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 p-4 sm:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-4">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 tracking-tight">Projektplan Bruker</h1>
        </header>
        
        <!-- Toggle Switch -->
        <div class="flex justify-end items-center mb-4">
            <span class="mr-3 text-sm font-medium text-gray-900">KW</span>
            <label for="date-toggle" class="inline-flex relative items-center cursor-pointer">
                <input type="checkbox" value="" id="date-toggle" class="sr-only peer">
                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
            </label>
            <span class="ml-3 text-sm font-medium text-gray-900">Datum</span>
        </div>

        <!-- The Gantt chart container with horizontal scroll on smaller screens -->
        <div class="overflow-x-auto bg-white/80 backdrop-blur-sm rounded-xl shadow-lg ring-1 ring-gray-900/5">
            <table class="w-full border-collapse text-sm">
                <!-- Table Header: Year and Calendar Weeks -->
                <thead class="text-xs text-gray-500 uppercase">
                    <tr>
                        <th class="sticky left-0 bg-white/95 p-4 text-left font-semibold w-1/4 min-w-[200px]">Phase / Aufgabe</th>
                        <th colspan="24" class="p-2 font-semibold text-center text-gray-800 border-b border-l border-gray-200">2025</th>
                        <th colspan="5" class="p-2 font-semibold text-center text-gray-800 border-b border-l border-gray-200">2026</th>
                    </tr>
                    <tr id="kw-row">
                        <th class="sticky left-0 bg-white/95 p-4 text-right pr-6 font-semibold w-1/4 min-w-[200px]">KW</th>
                        <!-- 2025 Calendar Weeks -->
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">29</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">30</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">31</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">32</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">33</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">34</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">35</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">36</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">37</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">38</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">39</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">40</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">41</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">42</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">43</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">44</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">45</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">46</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">47</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">48</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">49</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">50</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">51</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">52</td>
                        <!-- 2026 Calendar Weeks -->
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">01</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">02</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">03</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">04</td>
                        <td class="gantt-cell p-2 text-center border-l border-gray-200">05</td>
                    </tr>
                    <!-- Date rows will be inserted here by JavaScript -->
                </thead>
                <tbody class="divide-y divide-gray-200">

                    <!-- PHASE 0: Initialisierung -->
                    <tr class="bg-gray-50/50">
                        <td class="sticky left-0 bg-white/95 p-4 font-bold text-gray-900">Phase 0: Vorbereitung</td>
                        <!-- Timeline for Phase 0 -->
                        <td class="p-1"><div class="gantt-bar phase-0" title="Vorabsprachen Projekt-Workshop"></div></td>
                        <td colspan="28" class="p-1"></td>
                    </tr>
                    
                    <!-- PHASE 1: Setup -->
                    <tr class="bg-gray-50/50">
                        <td class="sticky left-0 bg-white/95 p-4 font-bold text-gray-900">Phase 1: Setup</td>
                        <td colspan="29" class="p-1"></td>
                    </tr>
                    <tr class="sub-task">
                        <td class="sticky left-0 bg-white/95 p-4">Projekt Setup</td>
                        <!-- Timeline for Projekt Setup: KW29 - KW33 -->
                        <td class="p-1"><div class="gantt-bar phase-1" title="Stakeholder-Kickoff"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Stakeholder-Kickoff"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Stakeholder-Kickoff"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Stakeholder-Kickoff"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Stakeholder-Kickoff"></div></td>
                        <td colspan="24" class="p-1"></td>
                    </tr>
                    <tr class="sub-task">
                        <td class="sticky left-0 bg-white/95 p-4">Tool Konfiguration</td>
                        <!-- Timeline for Tool Konfiguration: KW30 - KW39 -->
                        <td class="p-1"></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-1" title="Tool-Konfiguration & PoC-Workshop"></div></td>
                        <td colspan="18" class="p-1"></td>
                    </tr>

                    <!-- PHASE 2: PoC -->
                    <tr class="bg-gray-50/50">
                        <td class="sticky left-0 bg-white/95 p-4 font-bold text-gray-900">Phase 2: PoC</td>
                        <td colspan="29" class="p-1"></td>
                    </tr>
                    <tr class="sub-task">
                        <td class="sticky left-0 bg-white/95 p-4">Fachliche Umsetzung</td>
                        <!-- Timeline for Fachlich: KW39 - KW41 -->
                        <td colspan="10" class="p-1"></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Vorbereitungen abgeschlossen"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Vorbereitungen abgeschlossen"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Vorbereitungen abgeschlossen"></div></td>
                        <td colspan="16" class="p-1"></td>
                    </tr>
                    <tr class="sub-task">
                        <td class="sticky left-0 bg-white/95 p-4">Einrichtung Schnittstelle</td>
                        <!-- Timeline for Schnittstelle: KW40 - KW50 -->
                        <td colspan="11" class="p-1"></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-2" title="Installation, Konfiguration, Tests, Abnahme & Produktivnahme Schnittstelle"></div></td>
                        <td colspan="7" class="p-1"></td>
                    </tr>

                    <!-- PHASE 3: Ausrollen -->
                    <tr class="bg-gray-50/50">
                        <td class="sticky left-0 bg-white/95 p-4 font-bold text-gray-900">Phase 3: Ausrollen</td>
                        <td colspan="29" class="p-1"></td>
                    </tr>
                    <tr class="sub-task">
                        <td class="sticky left-0 bg-white/95 p-4">Train-the-Trainer</td>
                        <!-- Timeline for Train the Trainer: KW02 - KW03 (2026) -->
                        <td colspan="25" class="p-1"></td>
                        <td class="p-1"><div class="gantt-bar phase-3" title="Trainer-Schulung"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-3" title="Trainer-Schulung"></div></td>
                        <td colspan="2" class="p-1"></td>
                    </tr>
                    <tr class="sub-task">
                        <td class="sticky left-0 bg-white/95 p-4">Rollout</td>
                        <!-- Timeline for Rollout: KW04 - KW05 (2026) -->
                        <td colspan="27" class="p-1"></td>
                        <td class="p-1"><div class="gantt-bar phase-3" title="1. Planer- Q&A Schulung & Organisatorischer Go-Live Hana"></div></td>
                        <td class="p-1"><div class="gantt-bar phase-3" title="1. Planer- Q&A Schulung & Organisatorischer Go-Live Hana"></div></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const kwRow = document.getElementById('kw-row');
            const dateRow = document.createElement('tr');
            const monthRow = document.createElement('tr');
            const toggle = document.getElementById('date-toggle');

            function getDateOfISOWeek(w, y) {
                const simple = new Date(Date.UTC(y, 0, 1 + (w - 1) * 7));
                const dow = simple.getUTCDay();
                const ISOweekStart = simple;
                if (dow <= 4) {
                    ISOweekStart.setUTCDate(simple.getUTCDate() - simple.getUTCDay() + 1);
                } else {
                    ISOweekStart.setUTCDate(simple.getUTCDate() + 8 - simple.getUTCDay());
                }
                return ISOweekStart;
            }

            const dateHeaderCell = document.createElement('th');
            dateHeaderCell.className = "sticky left-0 bg-white/95 p-4 text-right pr-6 font-semibold w-1/4 min-w-[200px]";
            dateHeaderCell.textContent = "Tag";
            dateRow.appendChild(dateHeaderCell);

            const monthHeaderCell = document.createElement('th');
            monthHeaderCell.className = "sticky left-0 bg-white/95 p-4 text-right pr-6 font-semibold w-1/4 min-w-[200px]";
            monthHeaderCell.textContent = "Monat";
            monthRow.appendChild(monthHeaderCell);

            const timeline = [
                ...Array.from({ length: 24 }, (_, i) => ({ week: 29 + i, year: 2025 })),
                ...Array.from({ length: 5 }, (_, i) => ({ week: 1 + i, year: 2026 }))
            ];

            const dayFormatter = new Intl.DateTimeFormat('de-DE', { day: '2-digit' });
            const monthFormatter = new Intl.DateTimeFormat('de-DE', { month: 'long' });

            let currentMonth = -1;
            let monthCell;
            let monthColspan = 0;

            timeline.forEach((item, index) => {
                const startDate = getDateOfISOWeek(item.week, item.year);
                const month = startDate.getUTCMonth();

                if (month !== currentMonth) {
                    if (monthCell) {
                        monthCell.setAttribute('colspan', monthColspan);
                    }
                    currentMonth = month;
                    monthColspan = 1;
                    monthCell = document.createElement('td');
                    monthCell.className = 'p-2 font-semibold text-center text-gray-700 border-l border-b border-gray-200';
                    monthCell.textContent = monthFormatter.format(startDate);
                    monthRow.appendChild(monthCell);
                } else {
                    monthColspan++;
                }

                if (index === timeline.length - 1) {
                    if (monthCell) {
                        monthCell.setAttribute('colspan', monthColspan);
                    }
                }
                
                const dayCell = document.createElement('td');
                dayCell.className = 'gantt-cell p-2 text-center border-l border-gray-200';
                dayCell.textContent = dayFormatter.format(startDate);
                dateRow.appendChild(dayCell);
            });
            
            kwRow.after(monthRow);
            monthRow.after(dateRow);
            dateRow.hidden = true;
            monthRow.hidden = true;

            toggle.addEventListener('change', function() {
                kwRow.hidden = this.checked;
                monthRow.hidden = !this.checked;
                dateRow.hidden = !this.checked;
            });
        });
    </script>

</body>
</html>
